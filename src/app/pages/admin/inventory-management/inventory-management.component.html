<mat-card class="cardWithShadow">
  <mat-card-content>
    <mat-card-title>Inventory Management</mat-card-title>
    <mat-card-subtitle class="text-sm text-gray-500">
      View and manage inventory items in this section.
    </mat-card-subtitle>

    <div class="flex justify-between items-center mt-4">
      <div class="flex gap-2">
        <p-button
          pTooltip="Manage Categories"
          (click)="openCategoryDialog()"
          [outlined]="true"
          size="small"
          label="Manage Categories"
          icon="pi pi-tags"
        ></p-button>
        <p-button
          pTooltip="Manage Product Types"
          (click)="openProductTypeDialog()"
          [outlined]="true"
          size="small"
          label="Manage Types"
          icon="pi pi-list"
        ></p-button>
        <p-button
          pTooltip="Manage Item Groups"
          (click)="openItemGroupDialog()"
          [outlined]="true"
          size="small"
          label="Manage Groups"
          icon="pi pi-th-large"
        ></p-button>
      </div>

      <div class="relative w-[300px]">
        <i class="pi pi-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"></i>
        <input
          pInputText
          type="text"
          (input)="onGlobalFilter($event)"
          placeholder="Search items..."
          style="text-indent: 1.5rem;"
          class="w-full border border-gray-300 rounded-md py-2 pl-10 pr-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder:ml-6"
        />
      </div>
    </div>

    <p-table
      #dt1
      [value]="dataSource"
      [rows]="10"
      [paginator]="true"
      [globalFilterFields]="['itemCode', 'name', 'category', 'type', 'group']"
      [rowsPerPageOptions]="[5, 10, 25, 100]"
      [loading]="loading"
      [showCurrentPageReport]="false"
      [responsive]="true"
      [rowHover]="true"
      [scrollable]="true"
      scrollHeight="600px"
      styleClass="p-datatable-sm"
      [tableStyle]="{'min-width': '60rem'}"
      dataKey="id"
    >
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="itemCode">Item Code <p-sortIcon field="itemCode"></p-sortIcon></th>
          <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
          <th pSortableColumn="category">Category <p-sortIcon field="category"></p-sortIcon></th>
          <th pSortableColumn="type">Type <p-sortIcon field="type"></p-sortIcon></th>
          <th pSortableColumn="group">Group <p-sortIcon field="group"></p-sortIcon></th>
          <th pSortableColumn="quantity">Quantity <p-sortIcon field="quantity"></p-sortIcon></th>
          <th class="w-[100px]">Actions</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-row>
        <tr>
          <td>{{row.itemCode}}</td>
          <td>{{row.name}}</td>
          <td><p-badge [value]="row.category" severity="info"></p-badge></td>
          <td><p-badge [value]="row.type" severity="success"></p-badge></td>
          <td><p-badge [value]="row.group" severity="warn"></p-badge></td>
          <td>{{row.quantity}}</td>
          <td>
            <div class="flex gap-2">
              <button
                pButton
                icon="pi pi-pencil"
                class="p-button-rounded p-button-primary p-button-sm"
                [outlined]="true"
                (click)="openAddEditDialog(row)"
              ></button>
              <button
                pButton
                icon="pi pi-trash"
                class="p-button-rounded p-button-danger p-button-sm"
                [outlined]="true"
                (click)="deleteItem(row)"
              ></button>
            </div>
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="7">
            <div class="flex flex-col w-full items-center justify-center mb-8">
              <div class="overflow-hidden h-52 w-52 mr-8">
                <app-lottie-animation animation="box" class="w-60 h-60"></app-lottie-animation>
              </div>
              <span>No inventory items found.</span>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>

    <app-product-type-dialog #productTypeDialog></app-product-type-dialog>
    <app-category-dialog #categoryDialog></app-category-dialog>
    <app-item-group-dialog #itemGroupDialog></app-item-group-dialog>
  </mat-card-content>
</mat-card>