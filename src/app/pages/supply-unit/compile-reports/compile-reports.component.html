<!-- compile-reports.component.html -->
<div class="p-fluid">
    <p-card header="Compiled Reports" styleClass="p-shadow-3 mb-4">
      <div class="flex justify-between items-center mb-4">
        <p class="m-0">All generated inventory reports</p>
        <p-button 
          label="Export to CSV" 
          icon="pi pi-file-excel" 
          styleClass="p-button-success"
          (click)="exportCSV()"
          [outlined]="true"
          [size]="'small'"
        ></p-button>
      </div>
      
      <p-table [value]="reports" [scrollable]="true" scrollHeight="400px">
        <ng-template pTemplate="header">
          <tr>
            <th>Type</th>
            <th *ngIf="hasField('serialNo')">Serial No.</th>
            <th *ngIf="hasField('parNo')">PAR No.</th>
            <th *ngIf="hasField('icsNo')">ICS No.</th>
            <th>Entity</th>
            <th>Fund Cluster</th>
            <th>Date</th>
            <th>Description</th>
            <th>Quantity</th>
            <th>Unit Cost</th>
            <th>Total Cost</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-report>
          <tr>
            <td>{{ report.type }}</td>
            <td *ngIf="hasField('serialNo')">{{ report.serialNo || '-' }}</td>
            <td *ngIf="hasField('parNo')">{{ report.parNo || '-' }}</td>
            <td *ngIf="hasField('icsNo')">{{ report.icsNo || '-' }}</td>
            <td>{{ report.entityName }}</td>
            <td>{{ report.fundCluster }}</td>
            <td>{{ report.date | date }}</td>
            <td>{{ report.description || '-' }}</td>
            <td>{{ report.quantity || '-' }}</td>
            <td>{{ report.unitCost ? '₱' + (report.unitCost | number) : '-' }}</td>
            <td>{{ report.totalCost ? '₱' + (report.totalCost | number) : '-' }}</td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </div>