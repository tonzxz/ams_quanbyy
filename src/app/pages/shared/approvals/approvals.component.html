<mat-card class="cardWithShadow">
  <mat-card-content>
    <p-tabView>

      <!-- TAB 1: REQUISITIONS -->
      <p-tabPanel header="Requisitions">
        <mat-card-title>Requisitions</mat-card-title>
        <mat-card-subtitle class="text-sm text-gray-500">
          View requisitions assigned to you for approval.
        </mat-card-subtitle>

        <p-table
          [value]="requisitions"
          [rows]="10"
          [paginator]="true"
          [rowsPerPageOptions]="[5, 10, 20]"
          styleClass="p-datatable-sm mt-4"
        >
          <ng-template pTemplate="header">
            <tr>
              <th>Title</th>
              <th>Description</th>
              <th>Status</th>
              <th>Date Created</th>
              <th>Department</th>
              <th>Role</th>
              <th>Will be signed by</th>
              <th>Actions</th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-req>
            <tr>
              <td>{{ req.title }}</td>
              <td>{{ req.description }}</td>
              <td>{{ req.approvalStatus }}</td>
              <td>{{ req.dateCreated | date: 'short' }}</td>
              <td>{{ req.approvalSequenceDetails?.departmentName || 'N/A' }}</td>
              <td>{{ req.approvalSequenceDetails?.roleName || 'N/A' }}</td>
              <td>{{ req.approvalSequenceDetails?.userFullName || 'N/A' }}</td>
              <td>
                <div *ngIf="req.approvalStatus === 'Pending'" class="flex gap-2">
                  <button
                    pButton
                    label="Approve"
                    icon="pi pi-check"
                    class="p-button-success p-button-sm"
                    (click)="onApprove(req.id)"
                  ></button>
                  <button
                    pButton
                    label="Reject"
                    icon="pi pi-times"
                    class="p-button-danger p-button-sm"
                    (click)="onReject(req.id)"
                  ></button>
                </div>
                <div *ngIf="req.approvalStatus !== 'Pending'">
                  <span class="text-gray-500">({{ req.approvalStatus | uppercase }})</span>
                </div>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="8">
                <div class="flex flex-col w-full items-center justify-center py-8">
                  <span>No requisitions found.</span>
                </div>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </p-tabPanel>

    </p-tabView>
  </mat-card-content>
</mat-card>