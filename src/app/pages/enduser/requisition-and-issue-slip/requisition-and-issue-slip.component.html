<p-card header="Requisition and Issue Slip" class="mb-4">
  <p class="text-sm text-gray-600 mb-4">
    Manage and track your requisitions and issued slips below.
  </p>

  <p-tabView [(activeIndex)]="activeTabIndex">
    <!-- Requisition Tab -->
    <p-tabPanel header="Requisition">
      <form [formGroup]="requisitionForm" class="p-fluid" novalidate>
        <div class="grid formgrid gap-y-4">
          <!-- Product Selection -->
          <div class="field col-12 md:col-6">
            <label for="product" class="font-semibold text-gray-800 mb-2">Select Product</label>
         <p-dropdown
  [options]="products"
  optionLabel="name"
  [(ngModel)]="selectedProduct"
  placeholder="Select a product"
  [showClear]="true"
  class="w-full"
></p-dropdown>

            <small
              class="text-red-500"
              *ngIf="submitted && !selectedProduct"
            >Product is required</small>
          </div>

          <!-- Quantity -->
          <div class="field col-12 md:col-6">
            <label for="quantity" class="font-semibold text-gray-800 mb-2">Quantity</label>
            <input
              id="quantity"
              type="number"
              pInputText
              formControlName="quantity"
              placeholder="Enter quantity"
              class="w-full"
            />
            <small
              class="text-red-500"
              *ngIf="submitted && requisitionForm.get('quantity')?.errors?.['required']"
            >Quantity is required</small>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="flex justify-end mt-6">
          <p-button
            label="Submit Requisition"
            icon="pi pi-check"
            (onClick)="submitRequisition()"
            [loading]="loading"
          ></p-button>
        </div>
      </form>
    </p-tabPanel>

    <!-- Issuance Tab -->
    <p-tabPanel header="Issued Items">
      <p-table [value]="issuedItems" [rows]="10" [paginator]="true" [rowsPerPageOptions]="[5, 10, 20]">
        <ng-template pTemplate="header">
          <tr>
            <th>Product Name</th>
            <th>Quantity</th>
            <th>Date Issued</th>
            <th>Actions</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
          <tr>
            <td>{{ item.product_name }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.dateAdded | date: 'short' }}</td>
            <td>
              <p-button
                icon="pi pi-trash"
                label="Remove"
                severity="danger"
                [outlined]="true"
                size="small"
                (onClick)="removeIssuedItem(item.id)"
              ></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </p-tabPanel>
  </p-tabView>
</p-card>
